{% extends 'base.html.twig' %}

{% block title %}Gestionnaire de villes!
{% endblock %}

{% block body %}


	<div>
		<h1 class="mt-5 mb-3 text-uppercase">Gestion des villes</h1>

		<div>
			<div class="col-12">
				<p class="fw-bolder">
					Filter les villes</p>
			</div>
			<form action="{{ path('app_ville_find') }}" class="my-4 row" method="POST">
				<div class="col-lg-2">
					Le nom contient :</div>
				<div class="col-lg-2">

					<input class="form-control rounded-pill" type="text" name="myWord"></div>
				<div class="col-lg-2">
					<button class="btn btn-success" type="submit">
						Rechercher</button>
				</div>

			</form>

		</div>

		<div class="row">
			<div class="col-lg-8">
				<div class="table-responsive table-wrapper-scroll-y my-custom-scrollbar ">
					<table class="table">
						<thead class="table-primary">
							<tr>
								<th scope="col">Nom de la ville
								</th>
								<th scope="col">Code postal</th>
								
								{% if is_granted("ROLE_ADMIN") %}
									<th scope="col">Actions</th>
								{% endif %}
							</tr>
						</thead>
						<tbody>
							{% for ville in villes %}
								<tr>
									<th>{{ville.nomVille}}</th>
									<td>{{ville.codePostal}}</td>

									{% if is_granted("ROLE_ADMIN") %}
										<td>
											<a class="btn btn-warning text-white" href="{{ path('app_ville_eddit', {id:ville.id}) }}">
												<i class="fas fa-edit"></i>
											</a>
											<a class="btn btn-danger text-white" href="{{ path('app_ville_delete', {id:ville.id}) }}">
												<i class="fas fa-trash"></i>
											</a>
										</td>
									{% endif %}
								</tr>
							{% endfor %}
							<tr>
								{% if is_granted("ROLE_ADMIN") %}
								{{ form_start(formVille) }}
								<th>{{ form_row(formVille.nom_ville) }}</th>
								<th>{{ form_row(formVille.code_postal) }}</th>
								<td>
									<button class="my-4 btn btn-success text-white" type="submit">Ajouter</button>

								</td>
								{{ form_end(formVille) }}
								{% endif %}
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>


	{% endblock %}
