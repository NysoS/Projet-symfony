{% extends 'base.html.twig' %}

{% block body %}
    <div class="h" id="gestion-sites">
		<h1 class="title-page">GÃ©rer les lieux</h1>

        <div class="filter">
			<h2 class="mb-3">Filter les lieux</h2>

			<form class="row g-3" action="{{path('lieux_search')}}" method="POST">
				<div class="col-auto">
					<label for="input-search-lieux">Le nom contient</label>
				</div>
				<div class="col-auto">
					<input type="text" class="form-control" id="input-search-lieux" name="filter_lieux">
				</div>
				<div class="col-auto">
					<button type="submit" class="btn btn-primary mb-3">Rechercher</button>
				</div>
			</form>
		</div>

        <div class="table-sites">
			<table class="table">
				<thead>
					<tr>
						<th>Nom</th>
                        <th>Rue</th>
						{% if is_granted("ROLE_ADMIN") %}
							<th>Actions</th>
						{% endif %}
					</tr>
				</thead>
				<tbody>
					{% for lieu in lieux %}
						<tr>
							<td><a href="{{path('showLieu',{l:lieu.id})}}">{{lieu.getNomLieu()}}</a></td>
                            <td>{{lieu.getRue()}}</td>
							{% if is_granted("ROLE_ADMIN") %}
								<td><a href="{{path('editLieu',{l:lieu.getId()})}}" class="btn btn-warning">Modifier</a>-<a href="{{path('delLieu',{l:lieu.getId()})}}" class="btn btn-danger">Supprimer</a></td>
							{% endif %}
						</tr>
					{% endfor %}
				</tbody>
			</table>
            {% if is_granted("ROLE_ADMIN") %}
                <a href="{{'addLieu'}}" class="btn btn-success">Ajouter un lieu</a>
            {% endif %}
		</div>
    </div>
{% endblock %}